24-12-10.19:43:37.908 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_412 on Trickle with PID 9480 (started by Administrator in D:\workspace\big_market\DDD-bigmarket\DDD-bigmarket-app)
24-12-10.19:43:37.909 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-12-10.19:43:40.976 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-10.19:43:40.991 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-10.19:43:41.162 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 114 ms. Found 0 Redis repository interfaces.
24-12-10.19:43:48.244 [main            ] INFO  Version                - Redisson 3.26.0
24-12-10.19:43:51.744 [redisson-netty-1-5] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-12-10.19:43:51.766 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-12-10.19:43:56.560 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-10.19:43:56.697 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-12-10.19:43:56.965 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#668a32a4:0/SimpleConnection@7e94de5f [delegate=amqp://hush@127.0.0.1:5672//hush, localPort= 57034]
24-12-10.19:43:57.090 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 19.793 seconds (JVM running for 21.056)
24-12-10.19:43:57.485 [main            ] INFO  RaffleActivityController - 日历签到返利开始 userId:xiaofuge
24-12-10.19:43:57.546 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:43:58.096 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:43:58.188 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:43:58.236 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:43:58.711 [main            ] INFO  EventPublisher         - 发送MQ消息 topic:send_rebate message:{"data":{"bizId":"xiaofuge_sku_20241210","rebateConfig":"9011","rebateDesc":"签到返利-sku额度","rebateType":"sku","userId":"xiaofuge"},"id":"33649782380","timestamp":"2024-12-10 19:43:58.181"}
24-12-10.19:43:58.736 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  RebateMessageCostumer  - 监听用户行为返利 topic:send_rebate message:{"data":{"bizId":"xiaofuge_sku_20241210","rebateConfig":"9011","rebateDesc":"签到返利-sku额度","rebateType":"sku","userId":"xiaofuge"},"id":"33649782380","timestamp":"2024-12-10 19:43:58.181"}
24-12-10.19:43:58.740 [main            ] INFO  EventPublisher         - 发送MQ消息 topic:send_rebate message:{"data":{"bizId":"xiaofuge_integral_20241210","rebateConfig":"10","rebateDesc":"签到返利-积分","rebateType":"integral","userId":"xiaofuge"},"id":"85480358713","timestamp":"2024-12-10 19:43:58.185"}
24-12-10.19:43:58.764 [main            ] INFO  RaffleActivityController - 签到返利完成 userId:xiaofuge orderId:["182486163892","867329365789"]
24-12-10.19:43:58.775 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":true,"info":"成功"}
24-12-10.19:43:58.966 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:43:58.972 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:43:59.011 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:43:59.052 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:43:59.070 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:43:59.163 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态】校验开始。
24-12-10.19:43:59.163 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
24-12-10.19:43:59.325 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:43:59.330 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:43:59.331 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:43:59.331 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:44:37.224 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_412 on Trickle with PID 5320 (started by Administrator in D:\workspace\big_market\DDD-bigmarket\DDD-bigmarket-app)
24-12-10.19:44:37.225 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-12-10.19:44:39.241 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-10.19:44:39.248 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-10.19:44:39.356 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 77 ms. Found 0 Redis repository interfaces.
24-12-10.19:44:45.445 [main            ] INFO  Version                - Redisson 3.26.0
24-12-10.19:44:49.111 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-12-10.19:44:49.132 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-12-10.19:44:54.101 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-10.19:44:54.249 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-12-10.19:44:54.363 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#668a32a4:0/SimpleConnection@575d48db [delegate=amqp://hush@127.0.0.1:5672//hush, localPort= 57188]
24-12-10.19:44:54.492 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  RebateMessageCostumer  - 监听用户行为返利 topic:send_rebate message:{"data":{"bizId":"xiaofuge_integral_20241210","rebateConfig":"10","rebateDesc":"签到返利-积分","rebateType":"integral","userId":"xiaofuge"},"id":"85480358713","timestamp":"2024-12-10 19:43:58.185"}
24-12-10.19:44:54.523 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 17.87 seconds (JVM running for 18.963)
24-12-10.19:44:54.836 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  RebateMessageCostumer  - 监听用户行为返利消息 - 非 sku 奖励暂不处理 topic:send_rebate message:{"data":{"bizId":"xiaofuge_integral_20241210","rebateConfig":"10","rebateDesc":"签到返利-积分","rebateType":"integral","userId":"xiaofuge"},"id":"85480358713","timestamp":"2024-12-10 19:43:58.185"}
24-12-10.19:44:54.979 [main            ] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge1 activityId:100301
24-12-10.19:44:55.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-12-10.19:44:55.024 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-12-10.19:44:55.052 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:44:55.052 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:44:55.524 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:44:55.524 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:44:55.780 [main            ] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge1 activityId:100301 orderId:944597970539
24-12-10.19:44:55.814 [main            ] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge1 strategyId: 100006 ruleModel: rule_default awardId: 102
24-12-10.19:44:55.816 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 xiaofuge1 100006 102 rule_default
24-12-10.19:44:55.817 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:44:55.845 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:44:55.894 [main            ] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:xiaofuge1, StrategyId:100006, awardId:102
24-12-10.19:44:56.120 [main            ] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
24-12-10.19:44:56.122 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge1 100006 102 
24-12-10.19:44:56.292 [main            ] INFO  EventPublisher         - 发送MQ消息 topic:send_award message:{"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge1"},"id":"13417776727","timestamp":1733831096152}
24-12-10.19:44:56.309 [main            ] INFO  RaffleActivityControllerTest - 请求参数: {"activityId":100301,"userId":"xiaofuge1"}
24-12-10.19:44:56.311 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge1"},"id":"13417776727","timestamp":1733831096152}
24-12-10.19:44:56.314 [main            ] INFO  RaffleActivityControllerTest - 测试结果: {"code":"0000","data":{"awardId":102,"awardIndex":2,"awardTitle":"OpenAI会员卡"},"info":"成功"}
24-12-10.19:44:56.386 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:44:56.388 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:44:56.391 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:44:56.477 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:44:56.845 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:44:57.316 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:44:57.322 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:44:57.322 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:44:57.322 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:46:04.422 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_412 on Trickle with PID 3220 (started by Administrator in D:\workspace\big_market\DDD-bigmarket\DDD-bigmarket-app)
24-12-10.19:46:04.424 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
24-12-10.19:46:06.183 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-10.19:46:06.189 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-10.19:46:06.278 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 0 Redis repository interfaces.
24-12-10.19:46:11.587 [main            ] INFO  Version                - Redisson 3.26.0
24-12-10.19:46:15.247 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-12-10.19:46:15.267 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-12-10.19:46:19.265 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-10.19:46:19.373 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-12-10.19:46:19.448 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#668a32a4:0/SimpleConnection@575d48db [delegate=amqp://hush@127.0.0.1:5672//hush, localPort= 57360]
24-12-10.19:46:19.552 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 15.65 seconds (JVM running for 17.012)
24-12-10.19:46:19.898 [main            ] INFO  RaffleActivityController - 查询用户活动账户 开始…… userId:xiaofuge1， activityId:100301
24-12-10.19:46:19.963 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:46:20.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-12-10.19:46:20.011 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:46:20.027 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-12-10.19:46:20.098 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存 strategyId:100006 awardId:103
24-12-10.19:46:20.100 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:46:20.405 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:46:20.405 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:46:20.407 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:46:20.902 [main            ] INFO  RaffleActivityController - 查询用户活动账户 完成! userId:xiaofuge1 activityId:100301 dto:{"dayCount":10,"dayCountSurplus":10,"monthCount":10,"monthCountSurplus":10,"totalCount":10,"totalCountSurplus":9}
24-12-10.19:46:20.908 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"activityId":100301,"userId":"xiaofuge1"}
24-12-10.19:46:20.911 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":{"dayCount":10,"dayCountSurplus":10,"monthCount":10,"monthCountSurplus":10,"totalCount":10,"totalCountSurplus":9},"info":"成功"}
24-12-10.19:46:20.941 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:46:20.943 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:46:20.944 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:46:21.535 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:46:21.535 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:46:21.560 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:46:21.564 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:46:21.564 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:46:21.564 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:48:41.076 [main            ] INFO  RaffleStrategyControllerTest - Starting RaffleStrategyControllerTest using Java 1.8.0_412 on Trickle with PID 14744 (started by Administrator in D:\workspace\big_market\DDD-bigmarket\DDD-bigmarket-app)
24-12-10.19:48:41.078 [main            ] INFO  RaffleStrategyControllerTest - The following 1 profile is active: "dev"
24-12-10.19:48:42.945 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-10.19:48:42.951 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-10.19:48:43.047 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 62 ms. Found 0 Redis repository interfaces.
24-12-10.19:48:49.033 [main            ] INFO  Version                - Redisson 3.26.0
24-12-10.19:48:52.744 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-12-10.19:48:52.762 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-12-10.19:48:58.423 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-10.19:48:58.669 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-12-10.19:48:58.787 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#668a32a4:0/SimpleConnection@575d48db [delegate=amqp://hush@127.0.0.1:5672//hush, localPort= 57623]
24-12-10.19:48:59.039 [main            ] INFO  RaffleStrategyControllerTest - Started RaffleStrategyControllerTest in 18.522 seconds (JVM running for 19.646)
24-12-10.19:48:59.491 [main            ] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-12-10.19:48:59.637 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:49:00.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务，更新活动sku库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-12-10.19:49:00.031 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-12-10.19:49:00.055 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:49:00.194 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:49:00.194 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:49:00.250 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:49:00.277 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:49:00.346 [main            ] ERROR RaffleStrategyController - 查询抽奖策略权重规则配置失败 userId:xiaofuge activityId：100301
java.lang.NullPointerException: null
	at cn.hush.domain.strategy.model.entity.StrategyRuleEntity.getRuleWeightValues(StrategyRuleEntity.java:50)
	at cn.hush.infrastructure.persistent.repository.StrategyRepository.queryAwardRuleWeightByStrategyId(StrategyRepository.java:393)
	at cn.hush.infrastructure.persistent.repository.StrategyRepository$$FastClassBySpringCGLIB$$33bcb00c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.hush.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$11f37797.queryAwardRuleWeightByStrategyId(<generated>)
	at cn.hush.domain.strategy.service.raffle.DefaultRaffleStrategy.queryAwardRuleWeight(DefaultRaffleStrategy.java:103)
	at cn.hush.domain.strategy.service.raffle.DefaultRaffleStrategy.queryAwardRuleWeightByActivityId(DefaultRaffleStrategy.java:97)
	at cn.hush.trigger.http.RaffleStrategyController.queryRaffleStrategyRuleWeight(RaffleStrategyController.java:175)
	at cn.hush.test.domain.trigger.RaffleStrategyControllerTest.test_queryRaffleStrategyRuleWeight(RaffleStrategyControllerTest.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
24-12-10.19:49:00.935 [main            ] INFO  RaffleStrategyControllerTest - 请求参数：{"activityId":100301,"userId":"xiaofuge"}
24-12-10.19:49:00.939 [main            ] INFO  RaffleStrategyControllerTest - 测试结果：{"code":"0001","info":"未知失败"}
24-12-10.19:49:00.964 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:49:00.965 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:49:00.966 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:49:01.935 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:49:01.945 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:49:01.951 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:49:01.955 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:49:01.955 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:49:01.956 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:50:35.730 [main            ] INFO  RaffleStrategyControllerTest - Starting RaffleStrategyControllerTest using Java 1.8.0_412 on Trickle with PID 20232 (started by Administrator in D:\workspace\big_market\DDD-bigmarket\DDD-bigmarket-app)
24-12-10.19:50:35.732 [main            ] INFO  RaffleStrategyControllerTest - The following 1 profile is active: "dev"
24-12-10.19:50:37.377 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-12-10.19:50:37.384 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-12-10.19:50:37.459 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 51 ms. Found 0 Redis repository interfaces.
24-12-10.19:50:43.097 [main            ] INFO  Version                - Redisson 3.26.0
24-12-10.19:50:46.258 [redisson-netty-1-4] INFO  ConnectionsHolder      - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
24-12-10.19:50:46.274 [redisson-netty-1-13] INFO  ConnectionsHolder      - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
24-12-10.19:50:50.680 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-12-10.19:50:50.795 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-12-10.19:50:50.869 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#668a32a4:0/SimpleConnection@575d48db [delegate=amqp://hush@127.0.0.1:5672//hush, localPort= 57846]
24-12-10.19:50:50.976 [main            ] INFO  RaffleStrategyControllerTest - Started RaffleStrategyControllerTest in 15.779 seconds (JVM running for 16.952)
24-12-10.19:50:51.362 [main            ] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置开始 userId:xiaofuge activityId：100301
24-12-10.19:50:51.428 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:50:51.724 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:50:51.770 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-12-10.19:50:51.809 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-12-10.19:50:52.284 [main            ] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8862}],"info":"成功"}
24-12-10.19:50:52.287 [main            ] INFO  RaffleStrategyControllerTest - 请求参数：{"activityId":100301,"userId":"xiaofuge"}
24-12-10.19:50:52.288 [main            ] INFO  RaffleStrategyControllerTest - 测试结果：{"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8862}],"info":"成功"}
24-12-10.19:50:52.302 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:50:52.304 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:50:52.304 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-12-10.19:50:52.944 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:50:52.949 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:50:52.957 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-12-10.19:50:52.961 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:50:52.961 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-12-10.19:50:52.962 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
